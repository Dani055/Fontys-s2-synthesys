@page "{tournamentId}"
@using BusinessLayer.models
@using BusinessLayer
@model DuelSysWeb.Pages.Tournaments.TournamentDetailsModel
@{
}
<div class="wrapper">
    <div class="tournament-details">
        <div class="tournament-main-info">
            <h2><span class="green">@Model.tourney.Name</span></h2>
            <h3><span class="green">System:</span> @Model.tourney.SystemName</h3>
            <h3><span class="green">Location:</span> @Model.tourney.Location</h3>
        </div>
        <div class="tournament-side-info">
            <div class="tournament-card-desc">
                <p>@Model.tourney.Description</p>
            </div>
            <div class="tournament-card-desc">
                <p>@Model.tourney.StartDate.Date.ToShortDateString() → @Model.tourney.EndDate.Date.ToShortDateString()</p>
            </div>
            <div class="tournament-card-desc">
                <div class="desc-align-left">
                    <p>Players Min: @Model.tourney.MinPlayers</p>
                </div>
                <div class="desc-align-right">
                    <p>Players Max: @Model.tourney.MaxPlayers</p>
                </div>
            </div>
            @if (HttpContext.Session.GetLoggedUser() == null)
            {
                <h2><span class="red">You need to log in to register for tournaments</span></h2>
            }
            else if (HttpContext.Session.GetLoggedUser() != null && HttpContext.Session.GetLoggedUser() is Player)
            {
                if (Utils.GetSystemDate > Model.tourney.StartDate)
                {
                    <h2><span class="red">You can no longer register for this tournament</span></h2>
                }
                else
                {
                    <div class="tournament-card-desc">
                        <div class="desc-align-left">
                            <form method="post">
                                <button type="submit" asp-page-handler="OnRegister" class="button-black">Register</button>
                            </form>
                            
                        </div>
                        <div class="desc-align-right">
                            <form method="post"> 
                                 <button type="submit" asp-page-handler="OnDeregister" class="button-white">Deregister</button>
                            </form>

                        </div>
                    </div>
                }
            }
            else if(HttpContext.Session.GetLoggedUser() is Staff)
            {
                <h2><span class="red">You are a staff member. Only players can register for tournaments</span></h2>
            }
            
        </div>
        <div class="tournament-standings">
            <h3>Standings:</h3>
            <div class="tournament-standing">
                <p>Hans Olivera: <span class="green">Wins: </span>0  <span class="red">Losses: </span>0</p>
            </div>
            <div class="tournament-standing">
                <p>Samiye Iset: <span class="green">Wins: </span>0  <span class="red">Losses: </span>0</p>
            </div>
            <div class="tournament-standing">
                <p>Kriemhilde Raju: <span class="green">Wins: </span>0  <span class="red">Losses: </span>0</p>
            </div>
            <div class="tournament-standing">
                <p>Chandler Anti: <span class="green">Wins: </span>0  <span class="red">Losses: </span>0</p>
            </div>
        </div>
        <div class="tournament-games">
            <h3>Games:</h3>
            <div class="game">
                <div class="game-players">
                    <h3>Hans Olivera</h3>
                    <p>VS</p>
                    <h3>Samiye Iset</h3>
                </div>
                <div class="game-date">
                    <p><span class="blue">3.5.2022</span></p>
                </div>
                <div class="game-results">
                    <p>0 - 0</p>
                </div>
            </div>
            <div class="game">
                <div class="game-players">
                    <h3>Hans Olivera</h3>
                    <p>VS</p>
                    <h3>Kriemhilde Raju</h3>
                </div>
                <div class="game-date">
                    <p><span class="blue">4.5.2022</span></p>
                </div>
                <div class="game-results">
                    <p>0 - 0</p>
                </div>
            </div>
        </div>
    </div>
</div>